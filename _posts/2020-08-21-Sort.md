---
title: Sort
date: 2020-08-21 18:00-0800
categories:
-   DataStructure
tags:
- DataStrcture Sort
---

## æ’åº

### å†…éƒ¨æ’åº

> æ•°æ®éƒ½åœ¨å†…å­˜ä¸­è¿è¡Œï¼Œå…³æ³¨ç®—æ³•çš„æ—¶ç©ºå¤æ‚åº¦ã€‚

#### æ’å…¥æ’åº

##### ç›´æ¥æ’å…¥æ’åº

> å°†è®°å½•åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œæ’å¥½åºå’Œå¾…æ’åºéƒ¨åˆ†ã€‚æ¯æ¬¡ä»å¾…æ’åºçš„è®°å½•ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ æ’å…¥åˆ°å‰é¢å·²ç»æ’å¥½åºçš„éƒ¨åˆ†ï¼Œç›´åˆ°å…¨éƒ¨è®°å½•æ’å…¥å®Œæˆã€‚
>
> é“¾å¼å’Œé¡ºåºè¡¨çš†å¯ã€‚
>
> ç¨³å®š

```c
void InsertSort(int A[], int n){
    int i, j, temp;
    for(i=1; i<n; i++)
        if(A[i]<A[i-1]){
            temp = A[i];
            for(j=i-1;j>=0 && A[j]>temp; --j)
                A[j+1] = A[j];
            A[j+1] = temp;
        }
}
```

###### æŠ˜åŠæ’å…¥æ’åº

> å¯¹æ’å…¥çš„ä½ç½®è¿›è¡ŒæŠ˜åŠæŸ¥æ‰¾ï¼Œä¸è¿‡ä»…ä¼˜åŒ–äº†å¯¹æ¯”æ¬¡æ•°ï¼Œç§»åŠ¨å…ƒç´ çš„æ¬¡æ•°æ²¡å˜ã€‚å› æ­¤ä»æ²¡æœ‰è¾ƒå¥½çš„ä¼˜åŒ–ã€‚
>
> ä»…ç”¨äºæœ‰åºé¡ºåºè¡¨ã€‚
>
> ç¨³å®šã€‚

```c
void InsertSort(int A[], int n){
    int i, j, , low, high, mid;
    //ç•™A[0]ä½œä¸ºå“¨å…µ,è®°å½•ä»1å¼€å§‹ã€‚
    for(i=2; i<=n; i++){
        A[0] = A[i];
        low=1;
        high=i-1;
        //æŠ˜åŠæŸ¥æ‰¾
        while(low<=high){
            mid = low+high/2;
            if(A[mid]>A[0])
                high = mid-1;
            //æ­¤æƒ…å†µç‰¹æ®Šçš„ä¸€ç‚¹ï¼Œå½“è¦æ’å…¥çš„å€¼å’Œmidç›¸åŒæ—¶ï¼Œä»éœ€è¦ç»§ç»­è¿›è¡Œï¼Œåœ¨midæ‰€æŒ‡çš„å³è¾¹ç»§ç»­å¯»æ‰¾æ’å…¥ä½ç½®ï¼Œç¡®ä¿ç®—æ³•çš„ç¨³å®šæ€§ã€‚
            else
                low = mid+1;
        }
        //å½“low>highæ—¶æŠ˜åŠæŸ¥æ‰¾åœæ­¢ï¼Œåº”å°†[low,i-1]å†…çš„å…ƒç´ å…¨éƒ¨å³ç§»ï¼Œå¹¶å°†A[0]å¤åˆ¶lowæ‰€æŒ‡ä½ç½®ã€‚
        for(j=i-1; j>=low; --j)
            A[j+1] = A[j];
        A[low] = A[0];
    }
}
```



##### å¸Œå°”æ’åº

> ç›´æ¥æ’å…¥æ’åºåœ¨é€†åºçš„æƒ…å†µä¸‹æ¯”è¾ƒå’Œç§»åŠ¨æ¬¡æ•°è¾¾åˆ°æœ€å¤§ï¼Œå½“ç¬¬nä¸ªå…ƒç´ æ’å…¥çš„æ—¶å€™éœ€è¦æ¯”è¾ƒnæ¬¡å¹¶ç§»åŠ¨n+1æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦è¾¾åˆ°$$O(n^2)$$ï¼Œè€Œå½“æœ‰åºçš„æ—¶å€™ä»…éœ€è¦æ¯”è¾ƒnæ¬¡ï¼Œæ— éœ€ç§»åŠ¨ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º$$O(n)$$ã€‚
>
> å³åœ¨åŸºæœ¬æœ‰åºçš„æƒ…å†µä¸‹ï¼Œç›´æ¥æ’å…¥ä¼šå¾—åˆ°è¾ƒå¥½çš„è¡¨ç°ã€‚åŸºäºæ­¤æƒ³æ³•ï¼Œå¸Œå°”æ’åºåˆ©ç”¨æ­¥é•¿å°†å¾…æ’åºè¡¨åˆ†å‰²æˆè‹¥å¹²ä¸ªç‰¹æ®Šå­è¡¨ï¼Œå¯¹å„ä¸ªå­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ç„¶åç¼©çŸ­æ­¥é•¿ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ­¥é•¿ä¸º1ï¼Œåœ¨åŸºæœ¬æœ‰åºçš„æƒ…å†µä¸‹å¯¹æ•´ä¸ªæ’åºè¡¨è¿›è¡Œæ’åº
>
> ç©ºé—´å¤æ‚åº¦ä¸º$O(1)$ã€‚
>
> æ—¶é—´å¤æ‚åº¦æœ€åä¸º$$O(n)$$,å½“nåœ¨æŸä¸ªèŒƒå›´å†…ï¼Œå¯è¾¾åˆ°$$O(n^1.^3)$$ã€‚æ€»ä¹‹ä¼˜äºç›´æ¥æ’å…¥æ’åºã€‚
>
> ä»…ç”¨äºé¡ºåºè¡¨ã€‚
>
> ä¸ç¨³å®š

```c
//æŒ‰ç®—æ³•æ€æƒ³å®ç°
void ShellSort(int A[], int n){
    int d, i ,j, k;
    //ç•™A[0]ä¸ºæš‚å­˜å•å…ƒï¼Œæ­¤æ—¶å¹¶éå“¨å…µå™¢ã€‚
    for(d=n/2; d>=1; d=d/2)		//è®¾å®šæ­¥é•¿
        //å¯¹å½“å‰æ­¥é•¿æ‰€åˆ’åˆ†å­åºåˆ—è¿›è¡Œéå†ã€‚
        for(i=1;i<=n-d; i++)	
            for(j=d+i; j<=n; j = j+d)
                if(A[j]<A[j-d]){
                    A[0] = A[j];
                    for(k = j-d; k>0 && A[0]<A[k]; k=k-d)
                        A[k+d] = A[k];
                    A[k+d] = A[0];
                }
    return A;
}
```

:smile:

#### äº¤æ¢æ’åº

##### å†’æ³¡æ’åº

> ä»åå¾€å‰ä¸¤ä¸¤æ¯”è¾ƒç›¸é‚»å…ƒç´ ï¼Œè‹¥ä¸ºé€†åºåˆ™äº¤æ¢ï¼Œç›´åˆ°åºåˆ—æ¯”è¾ƒå®Œã€‚ä¸ºä¸€è¶Ÿå†’æ³¡æ’åºã€‚
>
> æ¯æ¬¡ç¡®å®šä¸€ä¸ªå…ƒç´ çš„æœ€ç»ˆä½ç½®ã€‚
>
> å½“è®°å½•æœ‰åºæ—¶ï¼Œæ¯”è¾ƒæ¬¡æ•°ä¸ºn-1ï¼Œç§»åŠ¨æ¬¡æ•°ä¸º0ã€‚æ—¶é—´å¤æ‚åº¦ä¸º$O(n)$
>
> æœ€åæƒ…å†µï¼Œé€†åºæ—¶ï¼Œæ¯”è¾ƒæ¬¡æ•°ä¸º$(n-1)+(n-2)+...+1=n(n-1)/2$=äº¤æ¢æ¬¡æ•°ã€‚æ—¶é—´å¤æ‚åº¦ä¸º$O(n^2)$
>
> é¡ºåºã€é“¾è¡¨çš†å¯
>
> ç¨³å®š

```c
void BubbleSort(int [], int n){
    for(int i=0; i<n-1; i++){
         bool flag = false;		//æ ‡å¿—æœ¬è¶Ÿå†’æ³¡æ˜¯å¦å‘ç”Ÿäº¤æ¢
        for(int j=n-1;j>0;j--){
            if(A[i-1]>A[i]){
                swap(A[i-1],A[i]);
                flag = true;
            }
        }
        if(flag==false)
            return;
    }
}
```



##### å¿«é€Ÿæ’åº

> éšæœºå–ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†(é€šå¸¸ä¸ºé¦–å…ƒç´ ï¼‰ï¼Œé€šè¿‡ä¸€è¶Ÿæ’åºå°†å¾…æ’åºè¡¨åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå·¦è¾¹çš„è®°å½•å…¨éƒ¨å°äºè¯¥åŸºå‡†ï¼Œå³è¾¹çš„è®°å½•å…¨éƒ¨å¤§äºç­‰äºè¯¥åŸºå‡†ï¼Œæœ€ç»ˆä½¿å¾—è¯¥åŸºå‡†è½åˆ°æœ€ç»ˆä½ç½®ï¼Œè¿™æ ·ä¸€æ¬¡å¤„ç†ä¸ºâ€œåˆ’åˆ†â€ã€‚
>
> æ¯æ¬¡ç¡®å®šä¸€ä¸ªè®°å½•çš„æœ€ç»ˆä½ç½®ï¼Œéœ€è¦næ¬¡â€œåˆ’åˆ†â€ã€‚
>
> æ—¶é—´å¤æ‚åº¦é€šè¿‡åˆ†æï¼Œæ¯æ¬¡å¿«æ’åªéœ€è¦å¤„ç†å‰©ä½™çš„å¾…æ’åºå…ƒç´ ï¼Œæœ€å¤šä¸è¶…è¿‡nã€‚æ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºé€’å½’æ¬¡æ•°*nã€‚
>
> è‹¥åºåˆ—åŸæœ¬å°±æœ‰åºæˆ–é€†åºï¼Œåˆ™æ—¶ç©ºå¤æ‚åº¦æœ€é«˜ã€‚
>
> å°†nä¸ªå…ƒç´ ç»„ç»‡æˆäºŒå‰æ ‘ï¼ŒäºŒå‰æ ‘çš„å±‚æ•°å³ä¸ºé€’å½’è°ƒç”¨çš„å±‚æ•°ã€‚
>
> ä¼˜åŒ–æ€è·¯ï¼šå°½é‡é€‰å–èƒ½å°†åºåˆ—å‡åŒ€åˆ’åˆ†çš„åŸºå‡†ã€‚
>
> - é€‰å¤´ï¼Œä¸­ï¼Œå°¾ä¸‰ä¸ªä½ç½®çš„å…ƒç´ ï¼Œå–ä¸­é—´å€¼ã€‚
> - éšæœºé€‰å–ä¸€ä¸ª
>
> ä¸ç¨³å®šã€‚

```c
void Partition(int A[], int low, int high){
    int pivot = A[low];		//ç¡®å®šåŸºå‡†
    while(low<high){
        while(low<high && A[high]>=pivot)	
            --high;		
        A[low] = A[high];		//æ¯”åŸºå‡†å°çš„ç§»åˆ°å·¦ç«¯éƒ¨åˆ†
        while(low<high && A[low]<pivot)
            ++low;
        A[high] = A[low];		//æ¯”åŸºå‡†å¤§æˆ–ç­‰äºçš„ç§»åˆ°å³ç«¯éƒ¨åˆ†
    }
    A[low] =pivot;		//åŸºå‡†å…ƒç´ æ”¾åˆ°æœ€ç»ˆä½ç½®
    return low;		//è¿”å›å­˜æ”¾åŸºå‡†å…ƒç´ çš„æœ€ç»ˆä½ç½®ã€‚
}
void QuickSort(int A[], int low, int high){
    if(low<high){
        int pivotpos = Partition(A, low, high);		//åˆ’åˆ†
        QuickSort(A,low,pivotpos-1);		//å¯¹å·¦ç«¯éƒ¨åˆ†åˆ’åˆ†
        QuickSort(A,pivotpos+1,high);		//å¯¹å³ç«¯éƒ¨åˆ†åˆ’åˆ†
    }
}
```

#### é€‰æ‹©æ’åº

##### ç®€å•é€‰æ‹©æ’åº

> æ¯ä¸€è¶Ÿåœ¨å¾…æ’åºå…ƒç´ ä¸­é€‰å–å…³é”®å­—æœ€å°çš„å…ƒç´ åŠ å…¥æœ‰åºå­åºåˆ—ã€‚
>
> ç©ºé—´å¤æ‚åº¦ä¸º$O(1)$
>
> æ—¶é—´å¤æ‚åº¦ï¼Œæ— è®ºæ˜¯æœ‰åºã€é€†åºè¿˜æ˜¯ä¹±åºä¸€å®šéœ€è¦n-1è¶Ÿå¤„ç†ï¼Œæ€»å…±éœ€è¦å¯¹æ¯”å…³é”®å­—$(n-1)+(n-2)+...+1=n(n-1)/2$æ¬¡ï¼Œå…ƒç´ äº¤æ¢æ¬¡æ•°<n-1ã€‚æ‰€ä»¥ä¸º$O(n^2)$
>
> é¡ºåºè¡¨ã€é“¾è¡¨çš†å¯
>
> ä¸ç¨³å®šï¼Œä¾‹å¦‚åºåˆ—221ã€‚

```c
void SelectSort(int A[], int n){
    for(int i=0; i<n-1; i++){		//ä¸€å…±éœ€è¦æ‰§è¡Œn-1è¶Ÿ
        int min = i;		//è®°å½•æœ€å°å…ƒç´ ä½ç½®
        for(int j=i+1; j<n; j++)		//ä»[i,n-1]ä¸­é€‰æ‹©æœ€å°çš„å…ƒç´ 
            if(A[j]<A[min])
                min = j;
        if(min!=i)
            swap(A[i],A[min])
    }
}
```



##### å †æ’åº

> èƒŒæ™¯çŸ¥è¯†ï¼š
>
> - è‹¥nä¸ªå…³é”®å­—åºåˆ—æ»¡è¶³ä»¥ä¸‹æŸä¸€æ¡æ€§è´¨ï¼Œåˆ™ç§°ä¸ºå †(Heap)ï¼›
> - â‘ è‹¥æ»¡è¶³çˆ¶äº²ç»“ç‚¹å¤§äºç­‰äºå·¦å³å­©å­ï¼Œåˆ™ç§°ä¸ºå¤§æ ¹å †ã€‚
> - â‘¡è‹¥æ»¡è¶³çˆ¶äº²ç»“ç‚¹å°äºç­‰äºå·¦å³å­©å­ï¼Œåˆ™ç§°ä¸ºå°æ ¹å †ã€‚
> - å®é™…å­˜å‚¨ä¸ºé¡ºåºè¡¨ï¼Œé€»è¾‘è§†è§’ä¸‹ä¸ºé¡ºåºå­˜å‚¨çš„å®Œå…¨äºŒå‰æ ‘ã€‚
>
> å»ºå †æ—¶é—´å¤æ‚åº¦ä¸º$O(n)$
>
> æ’åºéœ€è¦n-1è¶Ÿï¼Œæ¯ä¸€è¶Ÿäº¤æ¢åéœ€è¦è°ƒæ•´æ ¹ç»“ç‚¹ï¼Œè°ƒæ•´æœ€å¤šä¸‹é™$h-1$å±‚,æ¯ä¸€æ¬¡ä¸‹é™éœ€è¦å¯¹æ¯”å…³é”®å­—2æ¬¡ï¼Œå› æ­¤æ¯ä¸€è¶Ÿæ’åºå¤æ‚åº¦$O(h)$ã€‚æœ€åä¸€å±‚ï¼Œå³å¶ç»“ç‚¹æ— éœ€è°ƒæ•´ã€‚
>
> å³æ—¶é—´å¤æ‚åº¦ä¸º$O(n)+O(nlogn)=O(nlogn)$

```c
//å¤§æ ¹å †ä¸ºä¾‹,æ ¹èŠ‚ç‚¹ä¸ºk
//å»ºç«‹å¤§æ ¹å †
//é¡ºåºè¡¨ä»1å¼€å§‹å­˜å‚¨
void BuildMaxHeap(int A[], int len){
    for(int i=len/2; i>0; i--)
        HeadAdjust(A, i, len);
}
void HeadAdjust(int A[], int k, int len){
    A[0]=A[k];		//A[0]æš‚å­˜å­æ ‘çš„æ ¹ç»“ç‚¹
    for(int i=2*k; i<=len; i=i*2){
        if(i<len && A[i]<A[i+1])		//i<lenç¡®ä¿æœ‰å³å…„å¼Ÿ
            i++;		//å–å€¼è¾ƒå¤§çš„å­ç»“ç‚¹
        if(A[0]>=A[i])		//ç­›é€‰ç»“æŸ
            break;
        else{		//å°†A[i]è°ƒæ•´åˆ°åŒäº²ç»“ç‚¹
            A[k] = A[i];
            k = i;		//ä¿®æ”¹kå€¼ï¼Œå¯¹ç”±äºè°ƒæ•´è€Œå¯èƒ½å¯¼è‡´åŸæœ‰å¤§æ ¹å †æ€§è´¨å¤±æ•ˆçš„å­æ ‘ç»§ç»­è¿›è¡Œç­›é€‰
        }
    }
    A[k] = A[0];		//è¢«ç­›é€‰ç»“ç‚¹çš„å€¼æ”¾å…¥æœ€ç»ˆä½ç½®
}

//åŸºäºå¤§æ ¹å †è¿›è¡Œæ’åºä»å°åˆ°å¤§
void HeapSort(int A[], int len){
    BuildMaxHeap(A, len);
    for(int i=len; i>1; i--){
        swap(A[i],A[1]);		//å°†å †é¡¶å…ƒç´ å’Œå †åº•å…ƒç´ äº¤æ¢
        HeadAdjust(A, 1, i-1)	//å¯¹å‰©ä½™çš„å¾…æ’åºå…ƒç´ æ•´ç†æˆå †
    }
}
```

#### å½’å¹¶æ’åº

> æŠŠä¸¤ä¸ªæˆ–å¤šä¸ªå·²ç»æœ‰åºçš„åºåˆ—åˆå¹¶æˆä¸€ä¸ª
>
> å¤šæŒ‡é’ˆçš„æ€æƒ³ã€‚
>
> æ¯é€‰å‡ºä¸€ä¸ªå…ƒç´ éœ€è¦å¯¹æ¯”å…³é”®å­—m-1æ¬¡ã€‚
>
> äºŒè·¯å½’å¹¶å½¢æ€ä¸Šæ˜¯ä¸€æ£µå€’ç«‹çš„äºŒå‰æ ‘ï¼Œå½’å¹¶è¶Ÿæ•°ä¸º$O(h)$ï¼Œæ¯è¶Ÿå½’å¹¶æ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ã€‚å³æ—¶é—´å¤æ‚åº¦ä¸º$O(nlogn)$
>
> ç¨³å®š

```c
//äºŒè·¯å½’å¹¶
void Merge(int A[], int low, int mid,int high){
    int i,j,k,B[high+1];
    for(k=low;k<=high;k++)
        B[k] = A[k];
    for(i=low,j=mid+1,k=i; i<=mid&&j<=high;k++){
        if(B[i]<=B[j])
            A[k] = B[i++];
        else{
            A[k] = B[j++];
        }
    }
    while(i<=mid)
        A[k++] = B[i++];
    while(j<=high)
        A[k++] = B[j++];
}
void MergeSort(int A[], int low, int high){
    if(low<high){
        int mid = (low+high)/2;
        MergeSort(A, low, mid);
        MergeSort(A, mid+1, high);
        Merge(A, low, mid, high);
    }
}
```

### å¤–éƒ¨æ’åº

> æ•°æ®å¤ªå¤šï¼Œæ— æ³•å…¨éƒ¨æ”¾å…¥å†…å­˜ã€‚æ¶‰åŠåˆ°å†…å¤–å­˜ä¹‹é—´çš„æ•°æ®äº¤æ¢ï¼Œå› æ­¤è¿˜éœ€è¦é¢å¤–å…³æ³¨å¦‚ä½•å‡å°‘I/Oæ¬¡æ•°ã€‚

------

å›å¤´è¡¥å……ğŸ˜